language: node_js
node_js:
- '8'
- '10'
services:
- mongodb
sudo: false
cache:
  directories:
  - node_modules
before_script:
- npm install
- npm install -g coveralls lerna
- lerna bootstrap --hoist --no-ci
- sleep 2
script:
- "./node_modules/.bin/jest --coverage --detectOpenHandles"
- cat ./coverage/lcov.info | coveralls
- 
deploy:
  provider: heroku
  api_key:
    secure: frbQU7pvjnsOP4FWMTBltPngb5fB+TPy88xtp2dldxKTlEmER6azJOP1QKPy2b4JvB1w1qRF06+Wn6tkEoQsNXRYieaStGgN6f44EhfLmM5jRS8SYpqpR83JAfwSEgt/rGCJDDOUhZpff+8b3CBF7lOJBjowcnBM7acnF5YULDFbtCSyBXFDDo5dP9D9tDar8/9xBv6s1LOlG0Xkc3r6lCBDvomwL1rdW0ZPhm0HdggbvY6EcUIuD9HTAwoayNc9+dYCRCtAEruEFMTtVlZemhy1ogRIpxUu0zvEWqlVI3YEaHVZ69+7LBZMiBE8yyKB2RJZA2kqW3C96XW/OzWhtsAf+LXE8MJ1bela0wjztgcB9LZqW+lwiNKRC531IzBIVCygbSTryZZ57s/qwPIgStIMLwAJC+h6/U0esk/g8J116TV4ggRM3uWUbTQ0laA2uBxZFy0hxqrkIQT9ibxIwcQWqu43Et99+ckqmHLO3g5fR1W5AuFgvB0XuZMIz3wAnCMOK7PynejcM45tGmBsvCxUrHLQ2I6eghcBRYxvkiJzQIHtaHzLOZl+nNql3tcIiYoA6Bt2BrerhxMhJbgtdaQvHme0U4x/ARA+uVeVDI0T+H44TlnFd8OUvTIYy4DUeA2kFiThJZeW/DQY0QkD2KPL2kkEUlcSO+Y6zv3y09M=
